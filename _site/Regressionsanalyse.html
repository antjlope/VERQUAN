<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Annie Waldherr">
<meta name="dcterms.date" content="2024-11-28">

<title>Übung 5: Regressionsanalyse – R Tutorials</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R Tutorials</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#überblick-und-lernziele" id="toc-überblick-und-lernziele" class="nav-link active" data-scroll-target="#überblick-und-lernziele">Überblick und Lernziele</a></li>
  <li><a href="#das-arbeitsverzeichnis" id="toc-das-arbeitsverzeichnis" class="nav-link" data-scroll-target="#das-arbeitsverzeichnis">Das Arbeitsverzeichnis</a></li>
  <li><a href="#pakete-installieren-und-laden" id="toc-pakete-installieren-und-laden" class="nav-link" data-scroll-target="#pakete-installieren-und-laden">Pakete installieren und laden</a></li>
  <li><a href="#daten-einlesen" id="toc-daten-einlesen" class="nav-link" data-scroll-target="#daten-einlesen">Daten einlesen</a></li>
  <li><a href="#uv-und-av-definieren" id="toc-uv-und-av-definieren" class="nav-link" data-scroll-target="#uv-und-av-definieren">UV und AV definieren</a></li>
  <li><a href="#datenexploration-und-erste-voraussetzungsprüfung" id="toc-datenexploration-und-erste-voraussetzungsprüfung" class="nav-link" data-scroll-target="#datenexploration-und-erste-voraussetzungsprüfung">Datenexploration und erste Voraussetzungsprüfung</a></li>
  <li><a href="#einfache-regression" id="toc-einfache-regression" class="nav-link" data-scroll-target="#einfache-regression">Einfache Regression</a></li>
  <li><a href="#residuenanalyse-zur-voraussetzungsprüfung" id="toc-residuenanalyse-zur-voraussetzungsprüfung" class="nav-link" data-scroll-target="#residuenanalyse-zur-voraussetzungsprüfung">Residuenanalyse zur Voraussetzungsprüfung</a></li>
  <li><a href="#zum-nachlesen" id="toc-zum-nachlesen" class="nav-link" data-scroll-target="#zum-nachlesen">Zum Nachlesen</a></li>
  <li><a href="#hausübung-5" id="toc-hausübung-5" class="nav-link" data-scroll-target="#hausübung-5">Hausübung 5</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Übung 5: Regressionsanalyse</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Annie Waldherr </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 28, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="überblick-und-lernziele" class="level2">
<h2 class="anchored" data-anchor-id="überblick-und-lernziele">Überblick und Lernziele</h2>
<p>Dieses Tutorial gibt eine Einführung in die bivariate lineare Regressionsanalyse. Sie lernen, wie man:</p>
<ul>
<li>Daten für eine Regressionsanalyse vorbereitet,</li>
<li>eine lineare Beziehung visualisiert,</li>
<li>ein Regressionsmodell berechnet und interpretiert,</li>
<li>die Voraussetzungen einer linearen Regression überprüft,</li>
<li>eine Regression mit Bootstrapping durchführt.</li>
</ul>
</section>
<section id="das-arbeitsverzeichnis" class="level2">
<h2 class="anchored" data-anchor-id="das-arbeitsverzeichnis">Das Arbeitsverzeichnis</h2>
<p>Wie immer prüfen wir zuerst mit “getwd()”, unter welchem Pfad unser Arbeitsverzeichnis ist. Alle Skripte und Datensätze, mit denen wir arbeiten wollen, sollten in diesem Ordner abgelegt sein.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">##Arbeitsverzeichnis checken</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/antje/Documents/studium PUK/Master-Publizistik/STUDIENASSISTENZ/Test Tutorial"</code></pre>
</div>
</div>
</section>
<section id="pakete-installieren-und-laden" class="level2">
<h2 class="anchored" data-anchor-id="pakete-installieren-und-laden">Pakete installieren und laden</h2>
<p>Dann laden wir wieder mit dem Paket “pacman” die nötigen R-Pakete.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">##Pakete installieren und laden</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) {<span class="fu">install.packages</span>(<span class="st">"pacman"</span>); <span class="fu">library</span>(pacman)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Lade nötiges Paket: pacman</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(mosaic, knitr, tidyverse, broom, car, ggplot2, lmtest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="daten-einlesen" class="level2">
<h2 class="anchored" data-anchor-id="daten-einlesen">Daten einlesen</h2>
<p>Für diese Übung verwenden wir einen echten empirischen Datensatz aus dem European Social Survey: ESS Round 8 (2016): integrated file, edition 2.3, zu finden unter: <a href="https://ess-search.nsd.no/en/study/f8e11f55-0c14-4ab3-abde-96d3f14d3c76" class="uri">https://ess-search.nsd.no/en/study/f8e11f55-0c14-4ab3-abde-96d3f14d3c76</a></p>
<p>Der ESS ist eine wissenschaftlich begleitete länderübergreifende Umfrage, die seit 2001 in ganz Europa durchgeführt wird. Alle zwei Jahre werden Face-to-Face-Interviews mit neu ausgewählten Querschnittsstichproben durchgeführt. Nähere Informationen über die Variablen und ihre Kodierung finden sich im zugehörigen Codebuch, welches mit den Daten zur Verfügung gestellt wird.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Datensatz laden</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/ESS8e02_3.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Datensatz inspizieren</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Der Datensatz ist sehr groß, weshalb wir ihn im nächsten Schritt filtern. Uns interessieren nur die Datensätze von österreichischen Befragten (cntry==AT). Außerdem verwenden wir für die weitere Analyse nur die Auswahl folgender Variablen/Spalten: Gender (gndr), Age of respondent calculated (agea), News about politics and current affairs (nwspol), Internet use (netustm), Confident in own ability to participate (cptppola).</p>
<p>Wir legen mit dem Operator %&gt;% eine Pfeife an und nutzen hier nacheinander die Funktionen “filter” für die Auswahl der Fälle/Zeilen und “select” für die Auswahl der Variablen/Spalten aus dem tidyverse-Paket. Da der Name der Funktion “select” nicht eindeutig ist, müssen wir R mit “dplyr::select” einen konkreten Hinweis geben, damit es die select-Funktion aus dem Paket “dplyr” (welches Teil des tidyverse ist) verwendet. Ansonsten kann es zu Fehlermeldungen aufgrund von Konflikten mit anderen Paketen kommen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Fälle filtern und Variablen auswählen</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df_at <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cntry <span class="sc">==</span> <span class="st">"AT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(idno, gndr, agea, nwspol, netustm, cptppola)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df_at)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,010
Columns: 6
$ idno     &lt;int&gt; 1, 2, 4, 6, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 21, 22, 2…
$ gndr     &lt;int&gt; 2, 1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 2, 1, 1, 1, 2, 2, 2…
$ agea     &lt;int&gt; 34, 52, 68, 54, 20, 65, 52, 44, 22, 41, 57, 61, 50, 31, 58, 2…
$ nwspol   &lt;int&gt; 120, 120, 30, 30, 30, 60, 15, 45, 10, 60, 30, 90, 15, 30, 20,…
$ netustm  &lt;int&gt; 180, 120, 6666, 120, 180, 120, 6666, 30, 120, 120, 6666, 90, …
$ cptppola &lt;int&gt; 3, 3, 2, 4, 1, 2, 1, 2, 2, 2, 1, 3, 1, 2, 1, 2, 4, 3, 1, 2, 1…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_at)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  idno gndr agea nwspol netustm cptppola
1    1    2   34    120     180        3
2    2    1   52    120     120        3
3    4    2   68     30    6666        2
4    6    1   54     30     120        4
5   10    2   20     30     180        1
6   11    2   65     60     120        2</code></pre>
</div>
</div>
<p>Mit View() können wir uns den gefilterten Datensatz im Dateneditor anschauen. Damit wir in zukünftigen Übungen direkt mit dem österreichischen Teildatensatz arbeiten können, schreiben wir den Dataframe “df_at” mit dem folgenden Befehl in einen csv-File. Dieser wird autmatisch im Arbeitsverzeichnis abgelegt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(df_at)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(df_at, <span class="at">file =</span> <span class="st">"data/ESS8e02_3_AT.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="uv-und-av-definieren" class="level2">
<h2 class="anchored" data-anchor-id="uv-und-av-definieren">UV und AV definieren</h2>
<p>Wir wollen prüfen, welchen Einfluss die Internetnutzung der Befragten (netustm) auf ihre politische Nachrichtennutzung (nwspol) hat. Die Variable “netustm” ist also unsere unabhängige Variable (UV,Prädiktor), die Variable “nwspol” unsere abhängige Variable (AV, Kriterium). Beide Variablen sind metrisch, was den Voraussetzungen für eine Regressionsanalyse entspricht. Sowohl Internetnutzung (UV) als auch der politische Nachrichtenkonsum (AV) wurde in Minuten gemessen.</p>
<p>Nullhypothese H0: Die Internetnutzung der Befragten hat keinen Einfluss auf ihren politischen Nachrichtenkonsum.</p>
<p>Alternativhypothese H1: Je länger die Befragen das Internet nutzen, desto mehr politische Nachrichten konsumieren sie.</p>
<p>Mit dem unten stehenden Code, der Ihnen aus den vorigen Übungen bekannt ist, definieren wir unsere UV und AV und vergeben die zugehörigen Labels.</p>
<p>UV Internetnutzung (netustm) und AV politische Nachrichtennutzung (nwspol)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#UV und AV definieren</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df_at<span class="sc">$</span>uv <span class="ot">&lt;-</span> df_at<span class="sc">$</span>netustm</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>df_at<span class="sc">$</span>av <span class="ot">&lt;-</span> df_at<span class="sc">$</span>nwspol</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Labels vergeben</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>label_av <span class="ot">&lt;-</span> <span class="st">"Politischer Nachrichtenkonsum"</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>label_uv <span class="ot">&lt;-</span> <span class="st">"Internetnutzung"</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df_at)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,010
Columns: 8
$ idno     &lt;int&gt; 1, 2, 4, 6, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 21, 22, 2…
$ gndr     &lt;int&gt; 2, 1, 2, 1, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 2, 1, 1, 1, 2, 2, 2…
$ agea     &lt;int&gt; 34, 52, 68, 54, 20, 65, 52, 44, 22, 41, 57, 61, 50, 31, 58, 2…
$ nwspol   &lt;int&gt; 120, 120, 30, 30, 30, 60, 15, 45, 10, 60, 30, 90, 15, 30, 20,…
$ netustm  &lt;int&gt; 180, 120, 6666, 120, 180, 120, 6666, 30, 120, 120, 6666, 90, …
$ cptppola &lt;int&gt; 3, 3, 2, 4, 1, 2, 1, 2, 2, 2, 1, 3, 1, 2, 1, 2, 4, 3, 1, 2, 1…
$ uv       &lt;int&gt; 180, 120, 6666, 120, 180, 120, 6666, 30, 120, 120, 6666, 90, …
$ av       &lt;int&gt; 120, 120, 30, 30, 30, 60, 15, 45, 10, 60, 30, 90, 15, 30, 20,…</code></pre>
</div>
</div>
<p>Wenn wir den Datensatz genauer inspizieren (z.B. indem wir “View()” in die Konsole eingeben), sehen wir, dass unsere Variablen teils sehr hohe Werte außerhalb des gültigen Wertebereichs enthalten, wie z.B. 7777, 8888 oder 9999. Solche Werte werden üblicherweise verwendet, um fehlende Werte zu kennzeichnen. Ein Blick ins Codebuch zeigt uns auch, was diese Werte für die UV “nwspol” bedeuten: 7777 = Refusal, 8888 = Don’t know, 9999 = No answer. Alle werden als “missing values” gekennzeichnet. Für die AV “netustm” sind die die fehlenden Werte: 66666 = not applicable 7777 = Refusal, 8888 = Don’t know und 9999 = No answer.</p>
<p>Diese Information geben wir nun R, indem wir die UV und die AV so umkodieren, dass für die fehlenden Werte jeweils “NA” eingetragen wird.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Fehlende Werte umkodieren</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df_at<span class="sc">$</span>uv <span class="ot">&lt;-</span> <span class="fu">Recode</span>((df_at<span class="sc">$</span>uv), </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">'6666 = NA; 7777 = NA; 8888 = NA; 9999 = NA'</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>df_at<span class="sc">$</span>av <span class="ot">&lt;-</span> <span class="fu">Recode</span>((df_at<span class="sc">$</span>av), </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">'7777 = NA; 8888 = NA; 9999 = NA'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="datenexploration-und-erste-voraussetzungsprüfung" class="level2">
<h2 class="anchored" data-anchor-id="datenexploration-und-erste-voraussetzungsprüfung">Datenexploration und erste Voraussetzungsprüfung</h2>
<p>Nun lassen wir uns zunächst mit der Funktion “favstats” die wichtigsten deskriptiven Statistiken für die UV und die AV ausgeben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Deskriptive Statistiken</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>des_stats <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="st">"Internetnutzung"</span> <span class="ot">=</span> <span class="fu">favstats</span>(df_at<span class="sc">$</span>uv, <span class="at">na.rm =</span> T), <span class="st">"Politischer Nachrichtenkonsum"</span> <span class="ot">=</span> <span class="fu">favstats</span>(df_at<span class="sc">$</span>av, <span class="at">na.rm =</span> T))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(des_stats, <span class="at">digits=</span><span class="dv">2</span>, <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Minimum"</span>, <span class="st">"Q1"</span>, <span class="st">"Median"</span>,<span class="st">"Q3"</span>, <span class="st">"Maximum"</span>, <span class="st">"Mittelwert"</span>, <span class="st">"SD"</span>, <span class="st">"n"</span>, <span class="st">"Fehlend"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 32%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Minimum</th>
<th style="text-align: right;">Q1</th>
<th style="text-align: right;">Median</th>
<th style="text-align: right;">Q3</th>
<th style="text-align: right;">Maximum</th>
<th style="text-align: right;">Mittelwert</th>
<th style="text-align: right;">SD</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">Fehlend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Internetnutzung</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">180</td>
<td style="text-align: right;">600</td>
<td style="text-align: right;">138.98</td>
<td style="text-align: right;">109.18</td>
<td style="text-align: right;">1266</td>
<td style="text-align: right;">744</td>
</tr>
<tr class="even">
<td style="text-align: left;">Politischer Nachrichtenkonsum</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">48.73</td>
<td style="text-align: right;">54.66</td>
<td style="text-align: right;">1973</td>
<td style="text-align: right;">37</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>In der Statistik werden uns auch für beide Variablen die Zahl der jeweils gültigen (n) und fehlenden Werte angegeben.</p>
<p>Für die weiteren Analysen wollen wir die Fälle mit fehlenden Werten ausschließen. Dies erreichen wir wieder mit der Funktion “drop_na”, die wir auf beide Variablen, UV und AV, anwenden. Es werden also alle Fälle ausgeschlossen, die fehlende Werte in der UV oder AV aufweisen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Fälle mit fehlenden Werten ausschließen</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>df_at <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(df_at, uv, av)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Um einen ersten Eindruck über die Verteilungen der Daten zu gewinnen, erstellen wir Boxplots für die AV und die UV.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(df_at<span class="sc">$</span>av, <span class="at">main =</span> label_av)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Regressionsanalyse_files/figure-html/Boxplots-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(df_at<span class="sc">$</span>uv, <span class="at">main =</span> label_uv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Regressionsanalyse_files/figure-html/Boxplots-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Eine wichtige Voraussetzung für die Regressionsanalyse ist eine lineare Beziehung zwischen UV und AV. Um dies zu beurteilen, erstellen wir mit der Funktion “ggplot” aus dem Paket “ggplot2” ein Streudiagramm (Scatterplot), mit dem der Zusammenhang zwischen zwei Variablen visualisiert wird. In diesem werden alle Fälle als Punkte in einem zweidimensionalen Koordinatensystem dargestellt. Auf der x-Achse tragen wir die Werte der AV, auf der y-Achse die Werte der UV ab (andersherum ist es genauso möglich). Jeder Datenpunkt repräsentiert also ein Wertepaar der beiden Variablen.</p>
<p>Zunächst legen wir mit “ggplot” das Grafikobjekt “scatter” an und weisen diesem die wichtigsten Informationen über die verwendeten Daten (df_at) und die Variablen für den Plot zu. Das Argument “aes” steht für “aesthetic mapping”. Mit ihm ordnen wir die AV der x-Achse und die UV der y-Achse zu.</p>
<p>Dann verwenden wir dieses Objekt und fügen ihm weitere Elemente hinzu:</p>
<ul>
<li>geom_point(): Dies fügt die Punkte im Koordinatensystem ein.</li>
<li>geom_smooth(method = “lm”): Hiermit fügen wir eine lineare Regressionsgerade hinzu.</li>
<li>labs(x = label_av, y = label_uv): Wir legen die Beschriftung der Achsen gemäß der oben definierten Labels fest.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>scatter <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_at, <span class="fu">aes</span>(av, uv))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>scatter <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> label_av, <span class="at">y =</span> label_uv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Regressionsanalyse_files/figure-html/Streudiagramm mit ggplot2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wir können durchaus einen, wenn auch schwachen, linearen Trend in den Daten erkennen. Es macht also Sinn mit der linearen Regressionsanalyse fortzufahren.</p>
</section>
<section id="einfache-regression" class="level2">
<h2 class="anchored" data-anchor-id="einfache-regression">Einfache Regression</h2>
<p>Um die Regression durchzuführen, verwenden wir die Funktion “lm” (linear model) und weisen sie einem Objekt zu, welches wir “model” nennen. Die AV fügen wir vor der Tilde, die UV hinter der Tilde ein. Als Datensatz verwenden wir wieder “df_at”. Anschließend wenden wir die Funktion “summary” auf das Objekt “model” an. Damit erhalten wir die Zusammenfassung der Ergebnisse.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(av <span class="sc">~</span> uv, <span class="at">data =</span> df_at)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = av ~ uv, data = df_at)

Residuals:
   Min     1Q Median     3Q    Max 
-48.14 -29.81 -14.81  15.19 555.96 

Coefficients:
             Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept) 43.972100   2.509002  17.526 &lt;0.0000000000000002 ***
uv           0.006946   0.014156   0.491               0.624    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 54.85 on 1246 degrees of freedom
Multiple R-squared:  0.0001932, Adjusted R-squared:  -0.0006093 
F-statistic: 0.2407 on 1 and 1246 DF,  p-value: 0.6238</code></pre>
</div>
</div>
<p>Im Output sehen wir zuerst noch einmal unseren Aufruf (Call), dann deskriptive Statistiken über die Residuen (Residuals) und danach die Koeffizienten und die zugehörigen Statistiken (Coefficients). In der Tabelle der Koeffizienten finden wir in der ersten Spalte (Estimate) die unstandardisierten Regressionskoeffizienten, dann die Standardfehler, t-Werte und die korrespondierenden p-Werte, die uns sagen, ob die Regressionskoeffizienten signifikant sind.</p>
<p>Mit der Information in der ersten Spalte können wir unsere Regressionsgerade zusammenstellen.</p>
<p>y = 43.972100 + 0.006946x</p>
<p>Inhaltlich bedeutet dies, dass mit jeder Minute Internetnutzung der politische Nachrichtenkonsum um einen Skalenpunkt steigt. Dieser Effekt ist aber mit p&lt;0.001 höchst signifikant.</p>
<p>Unter der Tabelle fügt R weitere Informationen zum Standardfehler der Residuen, zur Güte des Modells (R-Quadrat) und die F-Statistik zum zugehörigen Regressionsmodell bei. Hier interessieren uns v.a. die Informationen zum R-Quadrat.</p>
<p>Wir erhalten beides, das (multiple) R-Quadrat sowie das korrigierte R-Quadrat. Wir berichten immer das korrigierte R-Quadrat! Es gibt uns an, wieviel der Varianz in der AV durch unser Regressionsmodell erklärt wird. Unser Modell erklärt nur fast 100% der Gesamtvarianz in unseren Daten. Das ist sehr wenig.</p>
</section>
<section id="residuenanalyse-zur-voraussetzungsprüfung" class="level2">
<h2 class="anchored" data-anchor-id="residuenanalyse-zur-voraussetzungsprüfung">Residuenanalyse zur Voraussetzungsprüfung</h2>
<p>Die Regressionsanalyse ist einerseits voraussetzungsreich, andererseits aber auch sehr robust gegen Verletzungen ihrer Voraussetzungen. Dies bedeutet, dass es meist nicht weiter schlimm ist, wenn einige der Voraussetzungen zumindest etwas verletzt werden. Die Prüfung sollte aber vorgenommen und berichtet werden.</p>
<ul>
<li><em>Skalenniveau</em>: Eine wichtige Voraussetzung, die unbedingt erfüllt sein muss, ist, dass die AV metrisch ist. Die UV kann metrisch oder nominal (dichotom) sein. Dies ist in unserem Beispiel, wie oben bereits erläutert, der Fall.</li>
<li><em>Linearität</em>: Ein Regressionsmodell wird nur zuverlässige Ergebnisse bringen, wenn auch eine lineare Beziehung zwischen den Variablen besteht. Dies haben wir oben mit Sichtprüfung des Streudiagramms bereits festgestellt.</li>
</ul>
<p>Es gibt drei weitere Voraussetzungen, die wir anhand einer Analyse der Residuen überprüfen. Dies sind jeweils die Abweichungen unserer Beobachtungen zur Regressionsgerade, also die Fehlervarianz, die nicht durch unser Regressionsmodell erklärt wird. Hierzu stellt uns R vier Plots zur Verfügung, die wir ganz einfach mit der Funktion “plot” aufrufen können, wenn wir sie auf unserem zuvor berechneten Modell “model” ausführen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Regressionsanalyse_files/figure-html/Residualplots-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Regressionsanalyse_files/figure-html/Residualplots-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Regressionsanalyse_files/figure-html/Residualplots-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Regressionsanalyse_files/figure-html/Residualplots-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p><em>Homoskedastizität</em>: Wie bei der Varianzanalyse soll es keine systematischen Unterschiede in der Varianz geben. Dies prüfen wir bei der Regressionsanalyse anhand der Residuen. Diese sollen keine systematische Varianz mehr aufweisen. Dies prüfen wir anhand der Plots 1 und 3, die jeweils die Residuen gegenüber den vorhergesagten Werten (fitted values) abtragen. Idealerweise verteilen sich die Punkte in beiden Plots gleichmäßig um die rote Linie. In Plot 1 sollen die Residuen zudem einen Mittelwert von 0 aufweisen. In unserem Beispiel sehen wir leider Abweichungen gerade im höheren Wertebereich.</p></li>
<li><p><em>Normalverteilung der Residuen</em>: Auch sollen die Residuen möglichst normalverteilt sein. Dies prüfen wir anhand des Q-Q-Plots (Plot 2), der die Quartile der standardisierten Residuen gegenüber den Quartilen der Normalverteilung abträgt. Hier sollen die Punkte möglichst nah an der roten Linie bleiben. Für unsere Daten sehen wir, dass die Daten im Großen und Ganzen dem Trend der roten Linie folgen, teilweise jedoch deutlich davon abweichen.</p></li>
<li><p><em>Ausreißeranalyse</em>: Ausreißer können die Ausrichtung der Regressionsgerade übermäßig verschieben. Es ist wichtig zu prüfen, ob Ausreißer bestehen und ob diese inhaltlich Sinn machen. Wenn es sich um fehlerhafte Werte handelt, sind diese zu löschen. Ausreißer haben wir bereits mit Hilfe der Boxplots identifizieren können. Zusätzlich gibt uns Plot 4 Informationen über den Einfluss möglicher Ausreißer auf das Regressionsmodell: zum einen gibt der Leverage-Wert auf der x-Achse des Plots Information über die Hebelwirkung einzelner Werte und bestimmt sich danach, wie weit der Wert einer UV von anderen Werten entfernt liegt. Ein hoher Hebelwert bedeutet, dass sich in der Nähe dieses Falls keine weiteren Fälle befinden und dieser daher potenziell großen Einfluss auf das gesamte Regressionsmodell hat. Plot 4 hebt jweils die drei Datenpunkte mit der höchsten Hebelwirkung hervor. Ein weiterer Anhaltspunkt ist Cook’s Distance: diese bezieht sich auf das Ausmaß, in dem sich die Koeffizienten im Modell ändern würden, wenn ein bestimmter Fall aus dem Datensatz entfernt würde. Problematisch sind Werte, die außerhalb (hier unterhalb) der grauen gestrichelten Linie liegen, in unserem Beispiel bei 3 Standardabweichungen. In unserem Beispiel liegen alle Werte oberhalb der gestrichelten Linie und sind daher nicht problematisch.</p></li>
</ul>
<p>Um die Sichtprüfung der Plots abzusichern, lassen sich zusätzlich Tests auf Homoskedastizität (Breusch-Pagan Test) und Normalverteilung (Shapiro-Wilk) der Residuen durchführen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bptest</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    studentized Breusch-Pagan test

data:  model
BP = 2.0285, df = 1, p-value = 0.1544</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Breusch-Pagan Test auf Homoskedastizität</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(<span class="fu">residuals</span>(model))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Shapiro-Wilk normality test

data:  residuals(model)
W = 0.58191, p-value &lt; 0.00000000000000022</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Test auf Normalverteilung der Residuen</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Beide Tests werden in unserem Fall signifikant, d.h. die beiden Annahmen der Homoskedastizität und der Normalverteilung der Residuen werden verletzt. Nun kann man entweder mit dem Hinweis auf die Robustheit der Regressionsanalyse auf Verletzung ihrer Annahmen dennoch die Ergebnisse der Regressionsanalyse berichten, oder man sichert die Analyse zusätzlich durch Bootstrapping ab.</p>
<p>Beim Bootstrapping werden aus den vorhandenen Daten Zufallsstichproben gezogen, und zwar viele tausend Male. Basierend auf diesen Bootstrap-Samples erhalten wir eine Verteilung der Schätzungen für jeden Parameter unseres Regressionsmodells und können dafür die Konfidenzintervalle berechnen. Damit erhalten wir Informationen über die Streuung und Unsicherheit unserer Schätzwerte.</p>
<p>In R können wir Bootstrapping mit der Funktion “Boot” aus dem Paket “car” anwenden. Diese Funktion erzeugt die Bootstrap-Samples aus den Originaldaten und berechnet zu jedem dieser Samples eine Regression. Wir müssen lediglich in den Argumenten zum Befehl “Boot” unser Orginalmodell (“model”) spezifizieren und die Zahl der gewünschten Wiederholungen (R = 2000) angeben. Alle erzeugten Bootstraps speichern wir in einem Objekt mit dem Namen “bootReg”.</p>
<p>Die Funktion “summary” gibt uns dann eine Zusammenfassung über das Bootstrapping. Zusätzlich berechnen wir mit der Funktion “confint()” die Konfidenzintervalle für die Bootstrap-Regressionskoeffizienten. Wir geben zwei Argumente an: das Objekt “bootReg”, für das die Koeffizienten berechnet werden sollen und das gewünschte Konfidenzniveau “level = 0.95”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Alternativ: Bootstrapping!</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>bootReg <span class="ot">&lt;-</span> <span class="fu">Boot</span>(model, <span class="at">R=</span><span class="dv">2000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Lade nötigen Namensraum: boot</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bootReg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Number of bootstrap replications R = 2000 
              original   bootBias   bootSE    bootMed
(Intercept) 43.9721000 -0.0423167 2.983652 43.8387510
uv           0.0069455  0.0001328 0.014793  0.0075961</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confint</span>(bootReg, <span class="at">level =</span> <span class="fl">0.95</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Bootstrap bca confidence intervals

                  2.5 %      97.5 %
(Intercept) 38.98228978 51.12155187
uv          -0.02339719  0.03526465</code></pre>
</div>
</div>
<p>In der Interpretation konzentrieren wir uns auf die Konfidenzintervalle des Bootstrappings. Im ausgegebenen Dataframe sehen wir die unteren und oberen Grenzen der Konfidenzintervalle für jeden Koeffizienten. Dies zeigt den Bereich an, in den der jeweilige Parameter mit großer Sicherheit fällt. Wenn ein 95%-Konfidenzintervall 0 nicht mit einschließt, können wir davon ausgehen, dass der Koeffizient auf einem Signifikanzniveau von .05 signifikant ist. Dies ist bei unserem Beispiel der Fall. Wir haben also unsere Regressionsanalyse zusätzlich mit Bootstrapping abgesichert.</p>
</section>
<section id="zum-nachlesen" class="level2">
<h2 class="anchored" data-anchor-id="zum-nachlesen">Zum Nachlesen</h2>
<p>Kapitel 7 in: Fields, A. (2012). Discovering Statistics Using R. Sage.</p>
</section>
<section id="hausübung-5" class="level2">
<h2 class="anchored" data-anchor-id="hausübung-5">Hausübung 5</h2>
<p>Jetzt sind Sie dran! Prüfen Sie mit einer einfachen Regressionsanalyse anhand desselben Datensatzes, ob die Internetnutzung der Befragten (netustm) einen Einfluss auf das Vertrauen in ihre eigenen Fähigkeiten zur politischen Partizipation hat (cptppola).</p>
<ol type="1">
<li>Legen Sie unabhängige und abhängige Variablen fest. Denken Sie daran ggfs. fehlende Werte umzukodieren. Tipp: Prüfen Sie die Codes für fehlende Werte im Codebuch!</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#UVs und AV definieren</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Wie lauten die Null- und die Alternativhypothese?</li>
</ol>
<p>Antwort: …</p>
<ol start="3" type="1">
<li>Berechnen Sie die deskriptiven Statistiken für UV und AV. Schließen Sie ggfs. fehlende Werte für die weiteren Analysen aus.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Deskriptive Statistiken</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Ausschluss von Fällen mit fehlenden Werten</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>Besteht ein linearer Zusammenhang zwischen UV und AV? Stellen Sie diesen graphisch dar.</li>
</ol>
<p>Antwort:…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Streudiagramm erstellen</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li>Führen Sie nun die Regressionsanalyse durch. Wie interpretieren Sie die Ergebnisse inhaltlich? Gehen Sie dabei auf alle wichtigen Koeffizienten ein.</li>
</ol>
<p>Antwort: …</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Regressionsanalyse durchführen</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="6" type="1">
<li>Prüfen Sie die weiteren Voraussetzungen der Regressionsanalyse anhand der diagnostischen Plots und ggfs. weiterer Tests. Beurteilen Sie, wie die Voraussetzungen erfüllt werden und welche Konsequenzen ggfs. gezogen werden müssen.</li>
</ol>
<p>Antwort: …</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Wichtig!</strong> Speichern Sie das angepasste Markdown mit einem Dateinamen nach dem folgenden Muster: Nachname_Übung5.Rmd Laden Sie diese Datei in den dafür vorgesehenen Ordner in Moodle.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>